/*! ovh-angular-contracts - 2.0.0 - 2018-08-02 */
angular.module("ovh-angular-contracts",[]),angular.module("ovh-angular-contracts").directive("contracts",function(){"use strict";return{restrict:"EA",templateUrl:"ovh-angular-contracts.html",scope:{contracts:"=",agree:"=contractsValidated"},controller:function(){this.disabled=!0},controllerAs:"ContractsCtrl",bindToController:!0,link:function(a,b,c,d){d.fullText="true"===c.fullText||void 0===c.fullText;var e={easing:"swing",duration:"300",offsetTop:"16"},f=function(){b.find(".contracts-breadcrumb-navigate-previous").unbind("click"),b.find(".contracts-breadcrumb-navigate-next").unbind("click"),b.find(".contracts-list").unbind("scroll"),b.find(".contracts-menu").undelegate("a","click");var c,f,g=b.find(".contracts-menu"),h="contract-0",i=g.find("a");d.currentContract=d.contracts[0],d.disabled=!0,g.delegate("a","click",function(a){var b=$(this).attr("data-fake-href");$(".contracts-list").stop().scrollTo(b,e),a.preventDefault()}),b.find(".contracts-list").scroll(function(e){var g=$(e.currentTarget),j=g.outerHeight(),k=g[0].scrollHeight-g.scrollTop();(k===j||5>k-j)&&a.$apply(function(){d.disabled=!1});var l=b.find(".contracts-list").height()/2+b.find(".contracts-list").offset().top;void 0===c&&(c=i.map(function(){var a=$($(this).attr("data-fake-href"));return void 0===f&&(f=a.offset().top),a.length?a:void 0}));var m=c.map(function(){return $(this).offset().top<=l?this:void 0});m=m[m.length-1];var n=m&&m.length?m[0].id:"contract-0";h!==n&&(h=n,a.$apply(function(){d.currentContract=d.contracts[n.split("-")[1]]}),i.removeClass("active").parent().end().filter("[data-fake-href=#"+n+"]").addClass("active"))}),b.find(".contracts-breadcrumb-navigate-previous").click(function(){h&&b.find(".contracts-list").stop().scrollTo("#contract-"+(parseInt(h.split("-")[1],10)-1),e)}),b.find(".contracts-breadcrumb-navigate-next").click(function(){h&&b.find(".contracts-list").stop().scrollTo("#contract-"+(parseInt(h.split("-")[1],10)+1),e)}),i.removeClass("active").parent().end().filter("[data-fake-href=#"+h+"]").addClass("active"),window.setTimeout(function(){b.find(".contracts-list").stop().scrollTo(0),i=g.find("a")},300)};a.$watch(function(){return d.contracts},function(a){void 0!==a&&f()})}}}),angular.module("ovh-angular-contracts").run(["$templateCache",function(a){"use strict";a.put("ovh-angular-contracts.html",'<div class=contracts-ctnr><div data-ng-if="ContractsCtrl.fullText === false"><table class="table table-bordered" data-ng-class="{\n                   \'table-striped\': ContractsCtrl.contracts.length > 1\n               }"><tr data-ng-repeat="contract in ContractsCtrl.contracts track by $index"><td><a target=_blank rel=noopener data-ng-href="{{ contract.url || contract.pdf }}"><i class="fa fa-file-pdf-o" aria-hidden=true></i> <span data-ng-bind=contract.name></span></a></td></tr></table><div class=checkbox><label><input type=checkbox data-ng-model="ContractsCtrl.agree"> <span data-ng-if="ContractsCtrl.contracts.length > 1" data-translate=contracts_agree></span> <span data-ng-if="ContractsCtrl.contracts.length === 1" data-translate=contract_agree></span></label></div></div><div data-ng-if="ContractsCtrl.fullText === true"><p data-ng-if="ContractsCtrl.contracts.length > 1" data-translate=contracts_list_title data-translate-values="{ \'nbr\': ContractsCtrl.contracts.length }"></p><p data-ng-if="ContractsCtrl.contracts.length === 1" data-translate=contract_list_title></p><div class=contracts-list><uib-accordion data-close-others=false><uib-accordion-group id="contract-{{ $index }}" data-heading="{{ contract.name }}" data-is-open=true data-ng-repeat="contract in ContractsCtrl.contracts track by $index"><pre class=contracts-content data-ng-bind="contract.content || contract.text">\n                    </pre></uib-accordion-group></uib-accordion></div><div class="contracts-breadcrumb text-center clearfix" role=navigation data-ng-show="ContractsCtrl.contracts.length > 1"><a class="pull-left contracts-breadcrumb-navigate contracts-breadcrumb-navigate-previous"><i class="glyphicon glyphicon-chevron-left" aria-hidden=true></i> <span data-translate=contract_previous></span></a><ul class="contracts-menu list-unstyled"><li class=contracts-breadcrumb-navigate data-ng-repeat="contract in ContractsCtrl.contracts track by $index"><a title="{{ contract.name }}" data-fake-href="#contract-{{ $index }}" data-ng-class="{\n                            \'active\' : ContractsCtrl.currentContract.name == contract.name\n                       }"></a></li></ul><a class="pull-right contracts-breadcrumb-navigate contracts-breadcrumb-navigate-next"><span data-translate=contract_next></span> <i class="glyphicon glyphicon-chevron-right" aria-hidden=true></i></a></div><a class=contracts-link title="{{ contract.name }}" target=_blank rel=noopener data-ng-if=ContractsCtrl.currentContract.name data-ng-href="{{ ContractsCtrl.currentContract.url || ContractsCtrl.currentContract.pdf }}"><i class="fa fa-file-pdf-o" aria-hidden=true></i> <span data-translate=contract_download data-translate-values="{ \'id\': ContractsCtrl.currentContract.name }"></span></a><div class=checkbox><label><input type=checkbox data-ng-model="ContractsCtrl.agree"> <span data-ng-if="ContractsCtrl.contracts.length > 1" data-translate=contracts_agree></span> <span data-ng-if="ContractsCtrl.contracts.length === 1" data-translate=contract_agree></span></label></div></div></div>')}]);