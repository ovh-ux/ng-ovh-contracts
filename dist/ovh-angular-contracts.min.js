/*! ovh-angular-contracts - 1.1.1 - 2017-06-23 */
angular.module("ovh-angular-contracts",[]),angular.module("ovh-angular-contracts").directive("contracts",function(){"use strict";return{restrict:"EA",templateUrl:"js/ovh-angular-contracts/ovh-angular-contracts.html",scope:{contracts:"=",agree:"=contractsValidated"},controller:function(){this.disabled=!0},controllerAs:"ContractsCtrl",bindToController:!0,link:function(a,b,c,d){d.fullText="true"===c.fullText||void 0===c.fullText;var e={easing:"swing",duration:"300",offsetTop:"16"};a.$watch(function(){return d.contracts},function(a){void 0!==a&&f()});var f=function(){b.find(".contracts-breadcrumb-navigate-previous").unbind("click"),b.find(".contracts-breadcrumb-navigate-next").unbind("click"),b.find(".contracts-list").unbind("scroll"),b.find(".contracts-menu").undelegate("a","click");var c,f,g=b.find(".contracts-menu"),h="contract-0",i=g.find("a");d.currentContract=d.contracts[0],d.disabled=!0,g.delegate("a","click",function(a){var b=$(this).attr("data-fake-href");$(".contracts-list").stop().scrollTo(b,e),a.preventDefault()}),b.find(".contracts-list").scroll(function(e){var g=$(e.currentTarget),j=g.outerHeight(),k=g[0].scrollHeight-g.scrollTop();(k===j||5>k-j)&&a.$apply(function(){d.disabled=!1});var l=b.find(".contracts-list").height()/2+b.find(".contracts-list").offset().top;void 0===c&&(c=i.map(function(){var a=$($(this).attr("data-fake-href"));return void 0===f&&(f=a.offset().top),a.length?a:void 0}));var m=c.map(function(){return $(this).offset().top<=l?this:void 0});m=m[m.length-1];var n=m&&m.length?m[0].id:"contract-0";h!==n&&(h=n,a.$apply(function(){d.currentContract=d.contracts[n.split("-")[1]]}),i.removeClass("active").parent().end().filter("[data-fake-href=#"+n+"]").addClass("active"))}),b.find(".contracts-breadcrumb-navigate-previous").click(function(){h&&b.find(".contracts-list").stop().scrollTo("#contract-"+(parseInt(h.split("-")[1],10)-1),e)}),b.find(".contracts-breadcrumb-navigate-next").click(function(){h&&b.find(".contracts-list").stop().scrollTo("#contract-"+(parseInt(h.split("-")[1],10)+1),e)}),i.removeClass("active").parent().end().filter("[data-fake-href=#"+h+"]").addClass("active"),window.setTimeout(function(){b.find(".contracts-list").stop().scrollTo(0),i=g.find("a")},300)}}}}),angular.module("ovh-angular-contracts").run(["$templateCache",function(a){"use strict";a.put("js/ovh-angular-contracts/ovh-angular-contracts.html",'<div class=contracts-ctnr><div data-ng-if="ContractsCtrl.fullText === false"><table class="table table-striped table-bordered"><tr data-ng-repeat="contract in ContractsCtrl.contracts"><td><a class=bold target=_blank data-ng-href="{{contract.url || contract.pdf}}"><i class="fa fa-file-pdf-o fs14"></i> {{contract.name}}</a></td></tr></table><div class=contracts-agree-ctnr><flat-checkbox><input type=checkbox id=validateContract name=validateContract data-ng-model="ContractsCtrl.agree"></flat-checkbox><label class="pointer left-space-m8 bottom-space-m0" for=validateContract><span data-ng-if="ContractsCtrl.contracts.length > 1" data-translate=contracts_agree></span> <span data-ng-if="ContractsCtrl.contracts.length === 1" data-translate=contract_agree></span></label></div></div><div data-ng-if="ContractsCtrl.fullText === true"><p class=bold data-ng-if="ContractsCtrl.contracts.length > 1" data-translate=contracts_list_title data-translate-values="{\'nbr\': ContractsCtrl.contracts.length}"></p><p class=bold data-ng-if="ContractsCtrl.contracts.length === 1" data-translate=contract_list_title></p><div class="contracts-list clearfix shadow-z-1"><uib-accordion close-others=false class=clearfix><uib-accordion-group heading={{contract.name}} is-open=true data-ng-repeat="contract in ContractsCtrl.contracts" id=contract-{{$index}}><pre class=contracts-content>{{contract.content || contract.text}}</pre></uib-accordion-group></uib-accordion></div><div class="contracts-breadcrumb top-space-m8 bottom-space-m4 text-center clearfix" role=navigation data-ng-show="ContractsCtrl.contracts.length > 1"><a class="pull-left contracts-breadcrumb-navigate contracts-breadcrumb-navigate-previous"><i class="glyphicon glyphicon-chevron-left"></i> <span data-translate=contract_previous></span></a><ul class="contracts-menu list-unstyled"><li class=contracts-breadcrumb-navigate data-ng-repeat="contract in ContractsCtrl.contracts"><a title={{contract.name}} data-fake-href=#contract-{{$index}} data-ng-class="{\n                            \'active\' : ContractsCtrl.currentContract.name == contract.name\n                       }"></a></li></ul><a class="pull-right contracts-breadcrumb-navigate contracts-breadcrumb-navigate-next"><span data-translate=contract_next></span> <i class="glyphicon glyphicon-chevron-right"></i></a></div><a title={{contract.name}} target=_blank class="block text-center text-muted fs10 top-space-m4 bottom-space-m4" data-ng-href="{{ContractsCtrl.currentContract.url || ContractsCtrl.currentContract.pdf}}" data-ng-if=ContractsCtrl.currentContract.name><i class="fa fa-file-pdf-o fs14"></i> <span data-translate=contract_download data-translate-values="{\'id\': ContractsCtrl.currentContract.name}"></span></a><div class="contracts-agree-ctnr top-space-m16 bottom-space-m16 space-p16"><flat-checkbox><input type=checkbox id=validateContract name=validateContract data-ng-model="ContractsCtrl.agree"></flat-checkbox><label class="pointer left-space-m8 bottom-space-m0" for=validateContract><span data-ng-if="ContractsCtrl.contracts.length > 1" data-translate=contracts_agree></span> <span data-ng-if="ContractsCtrl.contracts.length === 1" data-translate=contract_agree></span></label></div></div></div>')}]);